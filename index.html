<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Solar Web</title>

  <!-- Hoja de estilos principal -->
  <link rel="stylesheet" href="styles.css">

  <!-- Librer√≠as de Chart.js y plugin para boxplot -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-box-and-violin-plot@3.9.0/dist/chartjs-chart-box-and-violin-plot.min.js"></script>

  <!-- Librer√≠a para leer archivos Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- Librer√≠a math.js para operaciones con matrices -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>

  <!-- Librer√≠a Plotly para gr√°ficos 3D -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <!-- Leaflet CSS para el mapa -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <!-- Secci√≥n Hero -->
  <header id="heroSection" class="hero-section">
    <div class="hero-content">
      <h1>Solar Web</h1>
      <h2>¬°Ahora es m√°s f√°cil!</h2>
      <h2>Descubre c√≥mo la energ√≠a solar y el an√°lisis de datos pueden transformar tu mundo.</h2>
      <div class="hero-buttons">
        <button onclick="showSection('solarSection')">Calculadora de Energ√≠a Solar</button>
        <button onclick="showSection('panelSection')">¬øCu√°ntos paneles necesitas?</button>
        <button onclick="showSection('dataSection')">Ingresar Datos</button>
        <button onclick="showSection('analysisSection')">An√°lisis Estad√≠stico</button>
        <button onclick="showSection('regressionSection')">Regresi√≥n Lineal</button>
        <button onclick="showSection('parabolaSection')">Ajuste de Par√°bola</button>
        <button onclick="showSection('planeSection')">Ajuste de Plano (3D)</button>
        <button onclick="showSection('algebraSection')">√Ålgebra (Matrices)</button>
        <button onclick="showSection('helpSection')">Ayuda</button>
      </div>
    </div>
  </header>

  <!-- Contenedor principal -->
  <div class="wrapper">
    <!-- Secci√≥n Calculadora de Energ√≠a Solar -->
    <section class="container" id="solarSection" style="display: none;">
      <h2>Calculadora de Energ√≠a Solar</h2>
      <h3>Calcula la energ√≠a generada por tus paneles y conoce cu√°nto podr√≠as ahorrar en tu recibo de luz</h3>
      <p>Selecciona una opci√≥n para obtener la radiaci√≥n solar.</p>
      <label for="sourceType">Tipo de entrada:</label>
      <select id="sourceType" onchange="toggleInputs()">
        <option value="city" selected>Seleccionar Ciudad</option>
        <option value="coords">Ingresar Coordenadas</option>
      </select>
      <div class="fade-block city-block active" id="cityBlock">
        <label for="citySelect">Ciudad:</label>
        <select id="citySelect"></select>
      </div>
      <div class="fade-block coords-block" id="coordsBlock">
        <label for="latInput">Latitud:</label>
        <input type="number" id="latInput" placeholder="Ej: 19.70" step="0.01">
        <label for="lonInput">Longitud:</label>
        <input type="number" id="lonInput" placeholder="Ej: -101.19" step="0.01">
      </div>
      <label for="panelArea">√Årea del panel (m¬≤):</label>
      <input type="number" id="panelArea" placeholder="Ej: 1.6" min="0.1">
      <label for="efficiency">Eficiencia del panel (%):</label>
      <input type="number" id="efficiency" placeholder="Ej: 18" min="1" max="100">
      <button onclick="calculateEnergy()">Calcular Energ√≠a</button>
      <p id="result"></p>
      <div id="map"></div>
      <hr class="separator2">
      <h3>Calcula tu Consumo y Ahorro</h3>
      <p>En M√©xico los recibos de luz se emiten cada dos meses. Ingresa tu consumo bimestral (kWh), el monto del recibo (MXN) y la tarifa el√©ctrica ($/kWh).</p>
      <label for="bimonthlyConsumption">Consumo bimestral (kWh):</label>
      <input type="number" id="bimonthlyConsumption" placeholder="Ej: 600" min="1">
      <label for="bimonthlyCost">Monto del recibo bimestral (MXN):</label>
      <input type="number" id="bimonthlyCost" placeholder="Ej: 1000" min="1">
      <label for="electricityTariff">Tarifa el√©ctrica ($/kWh):</label>
      <input type="number" id="electricityTariff" placeholder="Ej: 2.5" step="0.01" min="0">
      <button onclick="calculateSavings()">Calcular Ahorro</button>
      <p id="savingsResult"></p>
      <div class="chart-container">
        <canvas id="savingsChart"></canvas>
      </div>
      <button class="back-home-btn solar" onclick="returnHome()"><span>‚òÄÔ∏è Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: ¬øCu√°ntos paneles necesitas? -->
    <section class="container" id="panelSection" style="display: none;">
      <h2>¬øCu√°ntos paneles necesitas?</h2>
      <p>Selecciona el tipo de panel y luego el modelo para ver una breve descripci√≥n. Ingresa el √°rea total que deseas cubrir para calcular la cantidad de paneles requeridos.</p>
      <label for="panelType">Tipo de panel:</label>
      <select id="panelType" onchange="populatePanelModels()">
        <option value="residential" selected>Residencial</option>
        <option value="industrial">Industrial</option>
      </select>
      <label for="panelModel">Modelo de panel:</label>
      <select id="panelModel" onchange="updatePanelDescription()"></select>
      <p id="panelDescription" class="panel-description"></p>
      <label for="requiredArea">√Årea total requerida (m¬≤):</label>
      <input type="number" id="requiredArea" placeholder="Ej: 50" min="1" step="0.1">
      <button onclick="calculatePanels()">Calcular Paneles Necesarios</button>
      <p id="panelResult"></p>
      <button class="back-home-btn panel" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: Ingresar Datos (Gr√°ficas) -->
    <section class="container" id="dataSection" style="display: none;">
      <h2>Ingresar Datos</h2>
      <p>Elige el tipo de gr√°fica y escribe tus datos para visualizar.</p>
      <label for="dataGraphType">Tipo de gr√°fica:</label>
      <select id="dataGraphType" onchange="handleDataGraphTypeChange()">
        <option value="histogram" selected>Histograma</option>
        <option value="boxplot">Boxplot</option>
        <option value="scatter">Gr√°fico XY</option>
      </select>
      <div id="numericDataContainer">
        <label for="customDataInput">Datos (n√∫meros separados por comas):</label>
        <textarea id="customDataInput" placeholder="Ej: 5, 10, 15, 20, 25"></textarea>
      </div>
      <div id="xyDataContainer" style="display: none;">
        <label for="xyDataInput">Datos XY (formato: x,y; x,y; ...):</label>
        <textarea id="xyDataInput" placeholder="Ej: 10,20; 30,40; 50,60"></textarea>
      </div>
      <button onclick="processData()">Procesar Datos</button>
      <div id="customDataResult"></div>
      <div class="chart-container">
        <canvas id="dataChart"></canvas>
      </div>
      <button class="back-home-btn" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: An√°lisis Estad√≠stico -->
    <section class="container" id="analysisSection" style="display: none;">
      <h2>An√°lisis Estad√≠stico</h2>
      <p>Ingresa datos num√©ricos separados por comas para calcular las medidas estad√≠sticas extendidas.</p>
      <textarea id="analysisInput" placeholder="Ej: 1,2,3,4,5,5,3"></textarea>
      <button onclick="calculateStatsOnly()">Calcular Estad√≠sticas Extendidas</button>
      <div id="analysisResult"></div>
      <button class="back-home-btn" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: Regresi√≥n (M√≠nimos Cuadrados) -->
    <section class="container" id="regressionSection" style="display: none;">
      <h2>Regresi√≥n por M√≠nimos Cuadrados</h2>
      <p>Elige c√≥mo ingresar los datos:</p>
      <label for="dataInputMethod">M√©todo de ingreso:</label>
      <select id="dataInputMethod" onchange="toggleDataInput()">
        <option value="manual" selected>Ingresar manualmente</option>
        <option value="file">Subir archivo Excel</option>
      </select>
      <!-- Entrada manual -->
      <div id="manualInputSection">
        <label for="regressionInput">Datos (formato "x,y; x,y; ..."):</label>
        <textarea id="regressionInput" placeholder="Ej: 1,2; 2,4; 3,5"></textarea>
      </div>
      <!-- Carga de archivo -->
      <div id="fileInputSection" style="display: none;">
        <label for="fileUpload">Subir archivo Excel (.xlsx):</label>
        <input type="file" id="fileUpload" accept=".xlsx" />
      </div>
      <button onclick="processRegression()">Procesar Regresi√≥n</button>
      <div id="regressionResult"></div>
      <div class="chart-container">
        <canvas id="regressionChart"></canvas>
      </div>
      <button class="back-home-btn" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: Ajuste de Par√°bola -->
    <section class="container" id="parabolaSection" style="display: none;">
      <h2>Ajuste de Par√°bola</h2>
      <p>Ingresa tus datos en el formato "x,y; x,y; ..." para ajustar la par√°bola: y = ax¬≤ + bx + c.</p>
      <textarea id="parabolaInput" placeholder="Ej: 1,1; 7,2; 1.5,3; 2,2; 2.5,4; 4,5; 5,4; 6,1; 6,3; 6,4"></textarea>
      <button onclick="processParabola()">Procesar Par√°bola</button>
      <div id="parabolaResult"></div>
      <div class="chart-container">
        <canvas id="parabolaChart"></canvas>
      </div>
      <button class="back-home-btn" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: Ajuste de Plano (3D) -->
    <section class="container" id="planeSection" style="display: none;">
      <h2>Ajuste de Plano (3D)</h2>
      <p>Selecciona el m√©todo de ingreso de datos:</p>
      <select id="planeDataInputMethod" onchange="togglePlaneDataInput()">
        <option value="manual" selected>Ingreso Manual</option>
        <option value="file">Cargar Archivo Excel</option>
      </select>
      
      <!-- Contenedor de ingreso manual (tabla) -->
      <div id="planeManualContainer">
        <p>Ingresa tus datos en la tabla:</p>
        <table id="planeDataTable">
          <thead>
            <tr>
              <th>x</th>
              <th>y</th>
              <th>z</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="number" step="any" class="plane-input-x"></td>
              <td><input type="number" step="any" class="plane-input-y"></td>
              <td><input type="number" step="any" class="plane-input-z"></td>
              <td><button type="button" onclick="removePlaneRow(this)">Eliminar</button></td>
            </tr>
          </tbody>
        </table>
        <button type="button" onclick="addPlaneRow()">Agregar fila</button>
      </div>

      <!-- Contenedor de carga de archivo -->
      <div id="planeFileContainer" style="display: none;">
        <label for="planeFileUpload">Subir archivo Excel (.xlsx):</label>
        <input type="file" id="planeFileUpload" accept=".xlsx" />
      </div>

      <button onclick="processPlane()">Procesar Plano</button>
      <div id="planeResult"></div>
      <div id="planeChart" class="chart-container" style="height:400px;"></div>
      <button class="back-home-btn" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: √Ålgebra (Matrices) -->
    <section class="container" id="algebraSection" style="display: none;">
      <h2>Operaciones con Matrices</h2>
      <p>Ingresa dos matrices (una por cada textarea) en el formato: cada fila separada por salto de l√≠nea y cada valor separado por coma.</p>
      <div class="matrix-container">
        <div>
          <h3>Matriz A</h3>
          <textarea id="matrixA" placeholder="Ej: 1,2,3&#10;4,5,6"></textarea>
        </div>
        <div>
          <h3>Matriz B</h3>
          <textarea id="matrixB" placeholder="Ej: 7,8,9&#10;10,11,12"></textarea>
        </div>
      </div>
      <button onclick="addMatrices()">Sumar Matrices (A+B)</button>
      <button onclick="multiplyMatrices()">Multiplicar Matrices (A√óB)</button>
      <div id="algebraResult1"></div>
      <hr class="separator2">
      <p>Para una sola matriz, ingresa la matriz y selecciona la operaci√≥n:</p>
      <textarea id="matrixSingle" placeholder="Ej: 4,7&#10;2,6"></textarea>
      <button onclick="transposeMatrix()">Transponer Matriz</button>
      <button onclick="invertMatrix()">Inversa de la Matriz</button>
      <div id="algebraResult2"></div>
      <button class="back-home-btn" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: Ayuda con videos -->
    <section class="container" id="helpSection" style="display: none;">
      <h2>Ayuda y Explicaci√≥n de Gr√°ficos</h2>
      <div class="help-item">
        <h3>Histograma</h3>
        <p>Visualiza la frecuencia de los datos en intervalos.</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/-VZ4x_rLCHE" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Boxplot (Diagrama de Caja)</h3>
        <p>Muestra la mediana, cuartiles y posibles valores at√≠picos.</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/24Uz1mBksL4" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Gr√°fico XY (Scatter)</h3>
        <p>Permite visualizar la relaci√≥n entre dos variables.</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/edE5Y1kOgFw" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Media (xÃÑ)</h3>
        <p>Promedio de todos los valores</p>
        <p><strong>F√≥rmula:</strong> xÃÑ = (Œ£x·µ¢) √∑ n</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/0DA7Wtz1ddg" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Mediana</h3>
        <p>Valor central en datos ordenados. Si es par: promedio de los dos centrales.</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/ms_prB5cLI8" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Desviaci√≥n Est√°ndar (œÉ)</h3>
        <p>Dispersi√≥n de los datos respecto a la media</p>
        <p><strong>F√≥rmula:</strong> œÉ = ‚àö[Œ£(x·µ¢ - xÃÑ)¬≤ √∑ n]</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/YC9158GWkpY" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Varianza</h3>
        <p>Desviaci√≥n est√°ndar al cuadrado</p>
        <p><strong>F√≥rmula:</strong> Var = œÉ¬≤</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/oZRaDwnpXkY" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Sesgo</h3>
        <p>Asimetr√≠a de la distribuci√≥n</p>
        <p><strong>F√≥rmula:</strong> Œ≥‚ÇÅ = [n/((n-1)(n-2))] √ó Œ£[(x·µ¢ - xÃÑ)/œÉ]¬≥</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/Oui8SSIBkTU" allowfullscreen></iframe>
        </div>
      </div>
      <div class="help-item">
        <h3>Curtosis</h3>
        <p>Medida de lo "puntiaguda" de la distribuci√≥n</p>
        <p><strong>F√≥rmula:</strong> Œ≤‚ÇÇ = [n(n+1)/((n-1)(n-2)(n-3))] √ó Œ£[(x·µ¢ - xÃÑ)/œÉ]‚Å¥ - [3(n-1)¬≤/((n-2)(n-3))]</p>
        <div class="video-container">
          <iframe src="https://www.youtube.com/embed/WQB9qBfmiGM" allowfullscreen></iframe>
        </div>
      </div>
      <button onclick="hideHelp()">Cerrar Ayuda</button>
    </section>
  </div>

  <!-- Pie de p√°gina con cr√©ditos -->
  <footer class="team-footer">
    <p>Desarrollado por:</p>
    <ul>
      <li>Gustavo P√©rez Gardu√±o</li>
      <li>Ivan Montoya Barrera</li>
      <li>Luis Fernando Avila Gazca</li>
      <li>Carlos Alberto Zurian Sanchez</li>
    </ul>
  </footer>

  <!-- Leaflet JS para el mapa -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Script principal -->
  <script src="script.js"></script>
</body>
</html>
