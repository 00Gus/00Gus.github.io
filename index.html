<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Solar Web</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Librer√≠a Chart.js para las gr√°ficas -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Plugin para Boxplot de Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-box-and-violin-plot@3.9.0/dist/chartjs-chart-box-and-violin-plot.min.js"></script>
  <!-- Leaflet CSS para el mapa -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <!-- Secci√≥n Hero (Portada) -->
  <header id="heroSection" class="hero-section">
    <div class="hero-content">
      <h1>Solar Web</h1>
      <h2>¬°Ahora es m√°s f√°cil!</h2>
      <h2>Descubre c√≥mo la energ√≠a solar puede transformar tu hogar y tus finanzas.</h2>
      <div class="hero-buttons">
        <button onclick="showSection('solarSection')">Calculadora de Energ√≠a Solar</button>
        <button onclick="showSection('statsSection')">An√°lisis Estad√≠stico</button>
        <button onclick="showSection('panelSection')">¬øCu√°ntos paneles necesitas?</button>
      </div>
    </div>
  </header>

  <!-- Contenedor principal -->
  <div class="wrapper">
    <!-- Secci√≥n Calculadora de Energ√≠a Solar -->
    <section class="container" id="solarSection" style="display: none;">
      <h2>Calculadora de Energ√≠a Solar</h2>
      <h3>Calcula la energ√≠a generada por tus paneles y conoce cu√°nto podr√≠as ahorrar en tu recibo de luz</h3>
      <p>Selecciona una opci√≥n para obtener la radiaci√≥n solar.</p>
      <label for="sourceType">Tipo de entrada:</label>
      <select id="sourceType" onchange="toggleInputs()">
        <option value="city" selected>Seleccionar Ciudad</option>
        <option value="coords">Ingresar Coordenadas</option>
      </select>
      <div class="fade-block city-block active" id="cityBlock">
        <label for="citySelect">Ciudad:</label>
        <select id="citySelect"></select>
      </div>
      <div class="fade-block coords-block" id="coordsBlock">
        <label for="latInput">Latitud:</label>
        <input type="number" id="latInput" placeholder="Ej. 19.70" step="0.01">
        <label for="lonInput">Longitud:</label>
        <input type="number" id="lonInput" placeholder="Ej. -101.19" step="0.01">
      </div>
      <label for="panelArea">√Årea del panel (m¬≤):</label>
      <input type="number" id="panelArea" placeholder="Ej. 1.6" min="0.1">
      <label for="efficiency">Eficiencia del panel (%):</label>
      <input type="number" id="efficiency" placeholder="Ej. 18" min="1" max="100">
      <button onclick="calculateEnergy()">Calcular Energ√≠a</button>
      <p id="result"></p>
      <div id="map"></div>
      <hr class="separator2">
      <h3>Calcula tu Consumo y Ahorro</h3>
      <p>En M√©xico los recibos de luz se emiten cada dos meses. Ingresa tu consumo bimestral (kWh), el monto del recibo (MXN) y la tarifa el√©ctrica ($/kWh).</p>
      <label for="bimonthlyConsumption">Consumo bimestral (kWh):</label>
      <input type="number" id="bimonthlyConsumption" placeholder="Ej. 600" min="1">
      <label for="bimonthlyCost">Monto del recibo bimestral (MXN):</label>
      <input type="number" id="bimonthlyCost" placeholder="Ej. 1000" min="1">
      <label for="electricityTariff">Tarifa el√©ctrica ($/kWh):</label>
      <input type="number" id="electricityTariff" placeholder="Ej. 2.5" step="0.01" min="0">
      <button onclick="calculateSavings()">Calcular Ahorro</button>
      <p id="savingsResult"></p>
      <div class="chart-container">
        <canvas id="savingsChart"></canvas>
      </div>
      <button class="back-home-btn solar" onclick="returnHome()"><span>‚òÄÔ∏è Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n de An√°lisis Estad√≠stico -->
    <section class="container" id="statsSection" style="display: none;">
      <h2>An√°lisis Estad√≠stico</h2>
      <p>Ingresa datos manualmente o sube un archivo para calcular medidas estad√≠sticas.</p>
      <textarea id="dataInput" placeholder="Ej: 1,2,3,4,5,5,3"></textarea>
      <button onclick="calculateExtendedStats()">Calcular Estad√≠sticas Extendidas</button>
      <div id="extendedStatsResult"></div>
      <hr class="separator2">
      <h3>Subir Archivo de Datos</h3>
      <input type="file" id="dataFile" accept=".csv, .txt">
      <label for="metricSelect">Selecciona la medida a calcular:</label>
      <select id="metricSelect">
        <option value="mean">Media</option>
        <option value="median">Mediana</option>
        <option value="mode">Moda</option>
        <option value="stddev">Desviaci√≥n Est√°ndar</option>
      </select>
      <button onclick="calculateFileStats()">Calcular desde Archivo</button>
      <p id="fileStatsResult"></p>
      <hr class="separator2">
      <h3>Visualizar Gr√°fica</h3>
      <label for="graphType">Selecciona tipo de gr√°fica:</label>
      <select id="graphType" onchange="renderGraph()">
        <option value="histogram" selected>Histograma</option>
        <!--<option value="boxplot">Boxplot</option>
        <option value="scatter">Gr√°fico XY</option>-->
      </select>
      <div class="chart-container">
        <canvas id="statsChart"></canvas>
      </div>
      <button class="back-home-btn stats" onclick="returnHome()"><span>üìä Volver al Inicio</span></button>
    </section>

    <hr class="separator">

    <!-- Secci√≥n: ¬øCu√°ntos paneles necesitas? -->
    <section class="container" id="panelSection" style="display: none;">
      <h2>¬øCu√°ntos paneles necesitas?</h2>
      <p>Selecciona el tipo de panel y luego el modelo para ver una breve descripci√≥n. Ingresa el √°rea total que deseas cubrir para calcular la cantidad de paneles requeridos.</p>
      <label for="panelType">Tipo de panel:</label>
      <select id="panelType" onchange="populatePanelModels()">
        <option value="residential" selected>Residencial</option>
        <option value="industrial">Industrial</option>
      </select>
      <label for="panelModel">Modelo de panel:</label>
      <select id="panelModel" onchange="updatePanelDescription()"></select>
      <p id="panelDescription" class="panel-description"></p>
      <label for="requiredArea">√Årea total requerida (m¬≤):</label>
      <input type="number" id="requiredArea" placeholder="Ej: 50" min="1" step="0.1">
      <button onclick="calculatePanels()">Calcular Paneles Necesarios</button>
      <p id="panelResult"></p>
      <button class="back-home-btn panel" onclick="returnHome()"><span>üîô Volver al Inicio</span></button>
    </section>
  </div>

  <!-- Scripts externos -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="script.js"></script>
</body>
</html>
